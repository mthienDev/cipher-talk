import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { Lock, Eye, EyeOff, Shield, Mail } from 'lucide-react';
import { useLogin } from '../hooks/use-auth';
import { cn } from '../../../lib/utils';
export function LoginPage() {
    const [email, setEmail] = useState('');
    const [password, setPassword] = useState('');
    const [showPassword, setShowPassword] = useState(false);
    const [rememberMe, setRememberMe] = useState(false);
    const navigate = useNavigate();
    const { mutate: login, isPending, error } = useLogin();
    const handleSubmit = (e) => {
        e.preventDefault();
        login({ email, password }, {
            onSuccess: () => {
                if (rememberMe) {
                    localStorage.setItem('rememberMe', 'true');
                }
                navigate('/');
            },
        });
    };
    return (_jsxs("div", { className: "min-h-screen flex items-center justify-center px-4 py-8 bg-white dark:bg-bg-primary", children: [_jsxs("div", { className: "absolute inset-0 overflow-hidden pointer-events-none", children: [_jsx("div", { className: "absolute -top-40 -right-40 w-80 h-80 bg-primary-500/10 rounded-full blur-3xl" }), _jsx("div", { className: "absolute -bottom-40 -left-40 w-80 h-80 bg-accent-500/10 rounded-full blur-3xl" })] }), _jsxs("div", { className: "relative w-full max-w-[440px]", children: [_jsxs("div", { className: "text-center mb-8", children: [_jsxs("div", { className: "flex items-center justify-center gap-3 mb-6", children: [_jsx("div", { className: "w-12 h-12 rounded-xl bg-primary-500/10 border border-primary-500/20 flex items-center justify-center", children: _jsx(Lock, { className: "w-6 h-6 text-primary-500" }) }), _jsx("h1", { className: "text-2xl font-semibold text-gray-900 dark:text-text-primary font-sans", children: "CipherTalk" })] }), _jsx("p", { className: "text-sm text-gray-600 dark:text-text-secondary font-sans", children: "Secure enterprise chat with end-to-end encryption" }), _jsxs("div", { className: "inline-flex items-center gap-2 mt-4 px-3 py-1.5 rounded-full bg-success-bg", children: [_jsx(Shield, { className: "w-4 h-4 text-success" }), _jsx("span", { className: "text-xs font-medium text-success font-sans", children: "End-to-End Encrypted" })] })] }), _jsx("div", { className: "card-elevated", children: _jsxs("form", { onSubmit: handleSubmit, className: "space-y-6", children: [error && (_jsx("div", { className: "rounded-lg p-4 border-l-4 bg-error-bg border-error", role: "alert", children: _jsx("p", { className: "text-sm text-error font-sans", children: error instanceof Error ? error.message : 'Login failed. Please check your credentials.' }) })), _jsxs("div", { className: "space-y-2", children: [_jsx("label", { htmlFor: "email", className: "block text-sm font-medium text-gray-900 dark:text-text-primary font-sans", children: "Email address" }), _jsxs("div", { className: "relative", children: [_jsx("div", { className: "absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none", children: _jsx(Mail, { className: "w-5 h-5 text-gray-500 dark:text-text-secondary" }) }), _jsx("input", { id: "email", name: "email", type: "email", autoComplete: "email", required: true, value: email, onChange: (e) => setEmail(e.target.value), className: "input pl-11 font-sans", placeholder: "Enter your email" })] })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("label", { htmlFor: "password", className: "block text-sm font-medium text-gray-900 dark:text-text-primary font-sans", children: "Password" }), _jsxs("div", { className: "relative", children: [_jsx("div", { className: "absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none", children: _jsx(Lock, { className: "w-5 h-5 text-gray-500 dark:text-text-secondary" }) }), _jsx("input", { id: "password", name: "password", type: showPassword ? 'text' : 'password', autoComplete: "current-password", required: true, value: password, onChange: (e) => setPassword(e.target.value), className: "input pl-11 pr-12 font-sans", placeholder: "Enter your password" }), _jsx("button", { type: "button", onClick: () => setShowPassword(!showPassword), className: "absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded transition-colors text-gray-500 dark:text-text-secondary hover:text-gray-900 dark:hover:text-text-primary", "aria-label": showPassword ? 'Hide password' : 'Show password', children: showPassword ? _jsx(EyeOff, { className: "w-5 h-5" }) : _jsx(Eye, { className: "w-5 h-5" }) })] })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("label", { className: "flex items-center gap-2 cursor-pointer group", children: [_jsx("input", { type: "checkbox", checked: rememberMe, onChange: (e) => setRememberMe(e.target.checked), className: cn("w-4 h-4 rounded border transition-colors cursor-pointer", rememberMe
                                                        ? "bg-primary-500 border-primary-500"
                                                        : "bg-white dark:bg-bg-tertiary border-gray-300 dark:border-border-default") }), _jsx("span", { className: "text-sm select-none text-gray-600 dark:text-text-secondary font-sans", children: "Remember me" })] }), _jsx(Link, { to: "/forgot-password", className: "text-sm font-medium text-primary-500 hover:text-primary-400 transition-colors font-sans", children: "Forgot password?" })] }), _jsx("button", { type: "submit", disabled: isPending, className: cn("btn btn-primary w-full font-sans"), children: isPending ? (_jsxs("span", { className: "inline-flex items-center gap-2", children: [_jsxs("svg", { className: "animate-spin h-5 w-5", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", children: [_jsx("circle", { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }), _jsx("path", { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })] }), "Signing in..."] })) : ('Sign In') }), _jsxs("div", { className: "relative", children: [_jsx("div", { className: "absolute inset-0 flex items-center", children: _jsx("div", { className: "w-full border-t border-gray-200 dark:border-border-default" }) }), _jsx("div", { className: "relative flex justify-center text-xs", children: _jsx("span", { className: "px-2 bg-white dark:bg-bg-secondary text-gray-600 dark:text-text-secondary font-sans", children: "New to CipherTalk?" }) })] }), _jsx("div", { className: "text-center", children: _jsx(Link, { to: "/register", className: "btn btn-secondary w-full font-sans", children: "Create an account" }) })] }) }), _jsx("p", { className: "text-center text-xs mt-6 text-gray-600 dark:text-text-secondary font-sans", children: "By signing in, you agree to our Terms of Service and Privacy Policy" })] })] }));
}
//# sourceMappingURL=LoginPage.js.map